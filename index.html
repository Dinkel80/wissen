<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily BrainSnack</title>
    
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2991/2991231.png">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/2991/2991231.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <style>
        :root {
            --primary: #6366f1; 
            --bg: #f8fafc;
            --text: #1e293b;
            --card-bg: #ffffff;
        }

        body { 
            font-family: 'Segoe UI', Roboto, sans-serif; 
            background-color: var(--bg); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
            padding: 20px; 
        }

        .card { 
            background: var(--card-bg); 
            width: 100%; 
            max-width: 420px; 
            padding: 30px; 
            border-radius: 24px; 
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); 
            text-align: center; 
        }

        .tag { 
            display: inline-block; 
            padding: 5px 15px; 
            border-radius: 20px; 
            font-size: 0.75rem; 
            font-weight: bold; 
            text-transform: uppercase; 
            margin-bottom: 15px; 
        }

        /* Kategorien-Farben */
        .tag-fakt { background: #dbeafe; color: #1e40af; }
        .tag-zitat { background: #fef3c7; color: #92400e; }
        .tag-wiki { background: #dcfce7; color: #166534; }
        .tag-tech { background: #ffedd5; color: #9a3412; }

        h2 { font-size: 1.5rem; color: var(--text); margin: 0 0 15px 0; line-height: 1.3; }
        
        #content { 
            font-size: 1.05rem; 
            color: #475569; 
            line-height: 1.6; 
            margin-bottom: 30px; 
            min-height: 120px;
            transition: opacity 0.3s;
        }
        
        button { 
            border: none; 
            width: 100%; 
            padding: 16px; 
            border-radius: 14px; 
            font-size: 1rem; 
            font-weight: 600; 
            cursor: pointer; 
            transition: transform 0.1s, background 0.2s; 
        }

        .btn-main { 
            background: var(--primary); 
            color: white; 
            box-shadow: 0 4px 6px -1px rgba(99, 102, 241, 0.4); 
            margin-bottom: 12px;
        }

        .btn-share { 
            background: #f1f5f9; 
            color: #475569; 
            display: none; 
        }
        
        button:active { transform: scale(0.97); }
        button:disabled { background: #cbd5e1; cursor: not-allowed; }

        .loader { 
            border: 3px solid #f3f3f3; 
            border-top: 3px solid var(--primary); 
            border-radius: 50%; 
            width: 30px; 
            height: 30px; 
            animation: spin 1s linear infinite; 
            display: none; 
            margin: 20px auto; 
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

<div class="card">
    <div id="badge" class="tag tag-fakt">Wissen</div>
    <h2 id="title">Dein BrainSnack</h2>
    <div id="content">Bereit fÃ¼r 3-5 Minuten Bildung? Klicke auf den Button.</div>
    <div id="loader" class="loader"></div>
    
    <button class="btn-main" id="nextBtn" onclick="fetchMagic()">Wissen entdecken</button>
    <button class="btn-share" id="shareBtn" onclick="shareFact()">ðŸ“¤ Mit Familie teilen</button>
</div>

<script>
    // Erweiterte Liste fÃ¼r allgemeinverstÃ¤ndliche Technik-Begriffe
    const techThemen = [
        "KÃ¼nstliche Intelligenz", "Blockchain", "Internet der Dinge", "Cloud Computing", 
        "Virtual Reality", "Augmented Reality", "5G", "Algorithmus", "Glasfaser", 
        "Quantencomputer", "Cybersecurity", "Big Data", "Autonomes Fahren", 
        "Maschinelles Lernen", "Industrie 4.0", "KryptowÃ¤hrung", "Smart Home", 
        "Biometrie", "Nanotechnologie", "Erneuerbare Energien", "Halbleiter",
        "Wasserstoffantrieb", "3D-Druck", "Kernfusion", "VPN", "Darknet",
        "Edge Computing", "ChatGPT", "Robotik", "Satelliteninternet", "Graphen",
        "NFC", "Li-Fi", "OLED", "Quantenkryptografie", "Smart City", "Wearable Computing",
        "Metaverse", "Server", "Open Source", "Programmiersprache", "API"
    ];

    async function translate(text) {
        try {
            const res = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=en|de`);
            const data = await res.json();
            return data.responseData.translatedText;
        } catch { return text; }
    }

    async function fetchMagic() {
        const content = document.getElementById('content');
        const badge = document.getElementById('badge');
        const title = document.getElementById('title');
        const loader = document.getElementById('loader');
        const btn = document.getElementById('nextBtn');
        const shareBtn = document.getElementById('shareBtn');

        content.style.opacity = '0';
        shareBtn.style.display = 'none';
        loader.style.display = 'block';
        btn.disabled = true;

        // Auswahl aus 4 Kategorien
        const mode = Math.floor(Math.random() * 4);

        try {
            if (mode === 0) { // FAKT
                const res = await fetch('https://uselessfacts.jsph.pl/api/v2/facts/random');
                const data = await res.json();
                badge.innerText = "Kurioses Wissen";
                badge.className = "tag tag-fakt";
                title.innerText = "Wusstest du das?";
                content.innerText = await translate(data.text);
            } 
            else if (mode === 1) { // ZITAT
                const res = await fetch('https://api.quotable.io/random');
                const data = await res.json();
                badge.innerText = "Inspiration";
                badge.className = "tag tag-zitat";
                title.innerText = data.author;
                content.innerText = await translate(data.content);
            }
            else if (mode === 2) { // WIKIPEDIA ZUFALL
                const res = await fetch('https://de.wikipedia.org/api/rest_v1/page/random/summary');
                const data = await res.json();
                badge.innerText = "Allgemeinwissen";
                badge.className = "tag tag-wiki";
                title.innerText = data.title;
                content.innerText = data.extract;
            }
            else { // TECHNIK-BEGRIFF
                const randomTech = techThemen[Math.floor(Math.random() * techThemen.length)];
                const res = await fetch(`https://de.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(randomTech)}`);
                const data = await res.json();
                badge.innerText = "Technik erklÃ¤rt";
                badge.className = "tag tag-tech";
                title.innerText = data.title;
                content.innerText = data.extract;
            }
            
            shareBtn.style.display = 'block';
        } catch (e) {
            content.innerText = "Fehler beim Laden. Bitte Internetverbindung prÃ¼fen!";
        } finally {
            loader.style.display = 'none';
            content.style.opacity = '1';
            btn.disabled = false;
        }
    }

    function shareFact() {
        const titleText = document.getElementById('title').innerText;
        const factText = document.getElementById('content').innerText;
        const shareString = `ðŸ’¡ *${titleText}*\n\n${factText}\n\n(Gesendet aus meiner Wissens-App)`;

        if (navigator.share) {
            navigator.share({ title: 'Tages-Wissen', text: shareString }).catch(() => {});
        } else {
            window.open(`https://wa.me/?text=${encodeURIComponent(shareString)}`, '_blank');
        }
    }
</script>

</body>
</html>
